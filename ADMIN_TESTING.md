# اختبار نظام Admin

## تسجيل الدخول كمسؤول

### طريقة الاختبار السريع

في صفحة Login (`/login`)، استخدم:

- **البريد الإلكتروني:** admin@example.com
- **كلمة المرور:** أي كلمة مرور

النظام سيكتشف من البريد الإلكتروني أن هذا مسؤول ويعطيك الصلاحيات المناسبة.

### طريقة يدوية (في Console)

إذا كنت تريد تعديل المستخدم يدوياً:

```javascript
// في browser console
const user = {
  id: "admin-123",
  email: "admin@example.com",
  name: "Admin",
  role: "admin",
  photoUrl:
    "https://images.unsplash.com/photo-1487864389829-c673f52989ba?w=400&h=400&fit=crop",
  createdAt: new Date().toISOString(),
};

localStorage.setItem("maqraa_user", JSON.stringify(user));
localStorage.setItem("maqraa_token", "token_" + Date.now());

// ثم أعد تحميل الصفحة
location.reload();
```

## المسارات المتاحة

بعد التسجيل كمسؤول:

| المسار                    | الصفحة          | الوصف                                |
| ------------------------- | --------------- | ------------------------------------ |
| `/admin`                  | لوحة التحكم     | النظرة العامة على التطبيقات والخدمات |
| `/admin/applications`     | قائمة التطبيقات | جميع تطبيقات المعلمين                |
| `/admin/applications/:id` | تفاصيل التطبيق  | فحص وموافقة على تطبيق محدد           |
| `/admin/services`         | قائمة الخدمات   | جميع خدمات المعلمين                  |
| `/admin/services/:id`     | تفاصيل الخدمة   | تعديل السعر والموافقة                |

## سيناريوهات الاختبار

### 1. اختبار الموافقة على التطبيق

1. اذهب إلى `/admin/applications`
2. انقر على تطبيق برقم ID (مثلاً ID: 1)
3. ستشاهد جميع بيانات المعلم والمستندات
4. أضف ملاحظات في الحقل
5. انقر على زر "الموافقة"
6. سيظهر تأكيد ويتم تحديث الحالة

### 2. اختبار رفض التطبيق

1. اذهب إلى تفاصيل التطبيق
2. انقر على "الرفض"
3. أدخل سبب الرفض
4. انقر على "تأكيد الرفض"
5. ستُحدّث الحالة إلى "مرفوض"

### 3. اختبار طلب مستندات

1. اذهب إلى تفاصيل التطبيق
2. انقر على "طلب مستندات"
3. سيتم إرسال طلب للمعلم بمستندات محددة

### 4. اختبار تعديل السعر

1. اذهب إلى `/admin/services`
2. انقر على خدمة
3. انقر على "تعديل السعر والموافقة"
4. أدخل السعر الجديد
5. انقر على "تأكيد تعديل السعر"
6. ستُحدّث الخدمة بالسعر الجديد

## بيانات الاختبار (Mock Data)

حالياً، النظام يستخدم mock data عند عدم توصيل API حقيقي.

### لتوصيل API الحقيقي:

1. أضف `VITE_API_URL` إلى ملف `.env`

```
VITE_API_URL=https://your-backend.com/api
```

2. يجب أن يرد Backend الحقول التالية:

#### للتطبيقات:

```json
{
  "id": 1,
  "teacher_id": "teacher-uuid",
  "teacher_name": "اسم المعلم",
  "email": "teacher@example.com",
  "phone": "+966501234567",
  "gender": "male",
  "nationality": "SA",
  "language": "ar",
  "bio": "السيرة الذاتية",
  "years_of_experience": 5,
  "qualification": "الإجازة",
  "status": 1,
  "status_display": "معلق",
  "applied_at": "2026-02-10T12:00:00Z",
  "documents": [...]
}
```

#### للخدمات:

```json
{
  "id": 1,
  "teacher_id": "teacher-uuid",
  "teacher_name": "اسم المعلم",
  "service_type": 1,
  "service_type_display": "تحفيظ القرآن",
  "hourly_rate": "50.00",
  "status": 1,
  "status_display": "بانتظار الموافقة",
  "created_at": "2026-02-10T12:00:00Z"
}
```

## الأخطاء الشائعة

### "لم يتم العثور على التطبيق"

- تأكد أن رقم ID صحيح
- التحقق من أن API يرد البيانات بشكل صحيح

### "فشل تحميل التطبيقات"

- تحقق من اتصال الإنترنت
- تأكد من توصيل API بشكل صحيح
- افتح console للتحقق من الأخطاء

### "غير مصرح لك بالدخول"

- تأكد من تسجيل الدخول كمسؤول (role: "admin")
- امسح cache واعد تحميل الصفحة

## نصائح التطوير

1. استخدم React DevTools للتحقق من state
2. استخدم Network tab في DevTools لرؤية API calls
3. استخدم Console لتصحيح الأخطاء بسهولة
4. جميع التواريخ معايرة على UTC ويتم تحويلها لـ local timezone

## التوسعات المستقبلية

- [ ] إضافة search و advanced filters
- [ ] إضافة bulk actions (موافقة متعددة)
- [ ] تقارير وإحصائيات
- [ ] audit logs لجميع الإجراءات
- [ ] رسائل بريدية للمعلمين
- [ ] نظام notifications real-time
